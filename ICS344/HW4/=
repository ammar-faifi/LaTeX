% vim: foldmethod=marker foldmarker=(fold),(end)
\documentclass{article}

\usepackage[a4paper, margin=20mm]{geometry}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{enumitem}
\usepackage{listings}
\usepackage{xcolor}

% Define code listing style
\lstdefinestyle{mystyle}{
	basicstyle=\ttfamily,
	keywordstyle=\color{blue},
	commentstyle=\color{green!60!black},
	stringstyle=\color{red},
	frame=single,
	breaklines=true,
	postbreak=\mbox{\textcolor{red}{$\hookrightarrow$}\space},
}

\lstset{style=mystyle}

% Set up page layout
\geometry{letterpaper, margin=1in}
\def\c#1{\texttt{#1}}

\title{Homework 4 - Information Security (ICS344)}
\author{Alfaifi, Ammar -- 201855360}
\date{\today}

\begin{document}
\maketitle

\section{Router Configuration Steps}

Assuming you have a virtual machine that you want to configure as a router with two interfaces, follow these steps:

\subsection{Assign IP Addresses to Interfaces}

\begin{lstlisting}[language=bash, caption={Assign IP addresses to interfaces}]
sudo ifconfig eth0 <IP_address_A> netmask <subnet\_mask\_A>
sudo ifconfig eth1 <IP\_address\_B> netmask <subnet\_mask\_B>
\end{lstlisting}

\subsection{Enable IP Forwarding}

\begin{lstlisting}[language=bash, caption={Enable IP forwarding}]
# Temporary (for testing)
sudo sysctl -w net.ipv4.ip\_forward=1

# Permanent
sudo nano /etc/sysctl.conf
# Uncomment or add the following line:
# net.ipv4.ip\_forward=1
sudo sysctl -p
\end{lstlisting}

\subsection{Set Up NAT}

\begin{lstlisting}[language=bash, caption={Set up NAT}]
sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
\end{lstlisting}

\subsection{Configure Routing}

\begin{lstlisting}[language=bash, caption={Configure static routes}]
# Add route for Network B
sudo route add -net <Network\_B> netmask <Subnet\_B> gw <Router\_IP\_A>

# Add route for Network A
sudo route add -net <Network\_A> netmask <Subnet\_A> gw <Router\_IP\_B>
\end{lstlisting}

\subsection{Update DNS}

Update the DNS settings on devices in both networks to point to the router's IP addresses.

\subsection{Test Connectivity}

Ensure that routing is working correctly by testing connectivity between devices in both networks.

\section{Important Notes}

\begin{itemize}
	\item This is a basic setup. In a real-world scenario, consider using dynamic routing protocols for more flexibility.
	\item Firewall settings may need adjustment based on specific requirements.
	\item Ensure your virtualization platform supports the configuration of multiple network interfaces.
\end{itemize}


\end{document}
